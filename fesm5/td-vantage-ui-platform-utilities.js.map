{"version":3,"file":"td-vantage-ui-platform-utilities.js","sources":["ng://@td-vantage/ui-platform/utilities/user-feedback/error/error.service.ts","ng://@td-vantage/ui-platform/utilities/user-feedback/toast/toast.service.ts","ng://@td-vantage/ui-platform/utilities/user-feedback/user-feedback.module.ts","ng://@td-vantage/ui-platform/utilities/pre-loader/pre-loader.ts"],"sourcesContent":["import { Injectable, Provider, SkipSelf, Optional } from '@angular/core';\n\nimport { MatDialogRef } from '@angular/material/dialog';\n\nimport { TdDialogService, IAlertConfig, TdAlertDialogComponent } from '@covalent/core/dialogs';\n\nimport { TranslateService } from '@ngx-translate/core';\n\nexport class VantageError {\n  message: string;\n  error: number;\n}\n\n@Injectable()\nexport class VantageErrorService {\n  constructor(private _dialogService: TdDialogService, private _translate: TranslateService) {}\n\n  open(error: VantageError): MatDialogRef<TdAlertDialogComponent> {\n    if (error) {\n      const config: IAlertConfig = {\n        id: 'vui-error-dialog' + (error.error !== undefined ? `-${error.error.toString()}` : ''),\n        panelClass: 'vui-error-dialog',\n        title: this._translate.instant('THERE_WAS_A_PROBLEM'),\n        message: error.message,\n        disableClose: true,\n        closeButton: this._translate.instant('CLOSE'),\n      };\n      if (error.error) {\n        config.message += ` (${error.error.toString()})`;\n      }\n      if (config.message || config.title) {\n        return this._dialogService.openAlert(config);\n      }\n    }\n  }\n}\n\nexport function VANTAGE_ERROR_PROVIDER_FACTORY(\n  parent: VantageErrorService,\n  dialogService: TdDialogService,\n  translate: TranslateService,\n): VantageErrorService {\n  return parent || new VantageErrorService(dialogService, translate);\n}\n\nexport const VANTAGE_ERROR_PROVIDER: Provider = {\n  // If there is already a service available, use that. Otherwise, provide a new one.\n  provide: VantageErrorService,\n  deps: [[new Optional(), new SkipSelf(), VantageErrorService], TdDialogService, TranslateService],\n  useFactory: VANTAGE_ERROR_PROVIDER_FACTORY,\n};\n","import { Injectable, Provider, Optional, SkipSelf } from '@angular/core';\n\nimport { MatSnackBar } from '@angular/material/snack-bar';\n\nimport { TdMediaService } from '@covalent/core/media';\n\n@Injectable()\nexport class VantageToastService {\n  constructor(private _snackBarService: MatSnackBar, private _media: TdMediaService) {}\n\n  open(message: string, time: number = 3000): void {\n    if (message) {\n      this._snackBarService.open(message, undefined, {\n        duration: time,\n        horizontalPosition: this._media && this._media.query('gt-sm') ? 'end' : 'center',\n      });\n    }\n  }\n}\n\nexport function VANTAGE_TOAST_PROVIDER_FACTORY(\n  parent: VantageToastService,\n  snackBar: MatSnackBar,\n  media: TdMediaService,\n): VantageToastService {\n  return parent || new VantageToastService(snackBar, media);\n}\n\nexport const VANTAGE_TOAST_PROVIDER: Provider = {\n  // If there is already a service available, use that. Otherwise, provide a new one.\n  provide: VantageToastService,\n  deps: [[new Optional(), new SkipSelf(), VantageToastService], MatSnackBar, [new Optional(), TdMediaService]],\n  useFactory: VANTAGE_TOAST_PROVIDER_FACTORY,\n};\n","import { NgModule } from '@angular/core';\n\nimport { CommonModule } from '@angular/common';\n\nimport { MatSnackBarModule } from '@angular/material/snack-bar';\n\nimport { CovalentDialogsModule } from '@covalent/core/dialogs';\nimport { CovalentMediaModule } from '@covalent/core/media';\n\nimport { VANTAGE_ERROR_PROVIDER } from './error/error.service';\nimport { VANTAGE_TOAST_PROVIDER } from './toast/toast.service';\n\n@NgModule({\n  imports: [CommonModule, MatSnackBarModule, CovalentDialogsModule, CovalentMediaModule],\n  providers: [VANTAGE_ERROR_PROVIDER, VANTAGE_TOAST_PROVIDER],\n})\nexport class VantageUserFeedbackModule {}\n","// TD_PRE_LOADER_COUNT variable is defined inside pre-loader.html\n\nexport function showPreLoader(): void {\n  if ((<any>window).TD_PRE_LOADER_COUNT !== undefined) {\n    (<any>window).TD_PRE_LOADER_COUNT++;\n    updatePreLoaderVisibility();\n  }\n}\n\nexport function hidePreLoader(): void {\n  if ((<any>window).TD_PRE_LOADER_COUNT !== undefined) {\n    (<any>window).TD_PRE_LOADER_COUNT--;\n    updatePreLoaderVisibility();\n  }\n}\n\nfunction updatePreLoaderVisibility(): void {\n  const loader: HTMLElement = document.getElementById('td-pre-loader');\n  if (loader) {\n    loader.style.height = (<any>window).TD_PRE_LOADER_COUNT > 0 ? '100%' : '0';\n    loader.style.opacity = (<any>window).TD_PRE_LOADER_COUNT > 0 ? '1' : '0';\n  }\n}\n"],"names":[],"mappings":"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"}