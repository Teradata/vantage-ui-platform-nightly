!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@angular/common/http"),require("rxjs"),require("rxjs/operators"),require("@covalent/http"),require("@covalent/core/dialogs"),require("@ngx-translate/core"),require("@angular/material/snack-bar"),require("@covalent/core/media")):"function"==typeof define&&define.amd?define("@td-vantage/ui-platform",["exports","@angular/core","@angular/common","@angular/common/http","rxjs","rxjs/operators","@covalent/http","@covalent/core/dialogs","@ngx-translate/core","@angular/material/snack-bar","@covalent/core/media"],t):t(((e=e||self)["td-vantage"]=e["td-vantage"]||{},e["td-vantage"]["ui-platform"]={}),e.ng.core,e.ng.common,e.ng.common.http,e.rxjs,e.rxjs.operators,e.covalent.http,e.covalent.core.dialogs,e["ngx-translate"].core,e.ng.material["snack-bar"],e.covalent.core.media)}(this,(function(e,t,n,r,a,o,i,s,p,u,c){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function d(e,t,n,r){var a,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i}function l(e,t){return function(n,r){t(n,r,e)}}function m(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function y(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var f=function(){function e(){}return e.prototype.query=function(e,t){return t.pipe(o.map((function(e){return{total:+e.headers.get("X-Total"),data:e.body}})))},e.prototype.create=function(e,t){return t},e.prototype.get=function(e,t){return t},e.prototype.health=function(e){return e.pipe(o.catchError((function(e){return a.of(!1)})),o.map((function(e){return!!e})))},d([i.TdGET({path:"/audit/messages",options:{observe:"response"}}),l(0,i.TdQueryParams()),l(1,i.TdResponse()),m("design:type",Function),m("design:paramtypes",[r.HttpParams,a.Observable]),m("design:returntype",a.Observable)],e.prototype,"query",null),d([i.TdPOST({path:"/audit/messages"}),l(0,i.TdBody()),l(1,i.TdResponse()),m("design:type",Function),m("design:paramtypes",[Object,a.Observable]),m("design:returntype",a.Observable)],e.prototype,"create",null),d([i.TdGET({path:"/audit/messages/:id"}),l(0,i.TdParam("id")),l(1,i.TdResponse()),m("design:type",Function),m("design:paramtypes",[Object,a.Observable]),m("design:returntype",a.Observable)],e.prototype,"get",null),d([i.TdGET({path:"/health"}),l(0,i.TdResponse()),m("design:type",Function),m("design:paramtypes",[a.Observable]),m("design:returntype",a.Observable)],e.prototype,"health",null),e=d([i.TdHttp({baseUrl:"/api/audit",baseHeaders:new r.HttpHeaders({Accept:"application/json"})})],e)}();function b(e){return e||new f}var T={provide:f,deps:[[new t.Optional,new t.SkipSelf,f]],useFactory:b},v=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[n.CommonModule],providers:[T]}]}],e}();var g=function(){function e(){}return e.prototype.create=function(e,t){return t},e.prototype.query=function(e){return e},e.prototype.delete=function(e){return e},e.prototype.health=function(e){return e.pipe(o.catchError((function(e){return a.of(!1)})),o.map((function(e){return!!e})))},d([i.TdPUT({path:"/smtp-config"}),l(0,i.TdBody()),l(1,i.TdResponse()),m("design:type",Function),m("design:paramtypes",[Object,a.Observable]),m("design:returntype",a.Observable)],e.prototype,"create",null),d([i.TdGET({path:"/smtp-config"}),l(0,i.TdResponse()),m("design:type",Function),m("design:paramtypes",[a.Observable]),m("design:returntype",a.Observable)],e.prototype,"query",null),d([i.TdDELETE({path:"/smtp-config"}),l(0,i.TdResponse()),m("design:type",Function),m("design:paramtypes",[a.Observable]),m("design:returntype",a.Observable)],e.prototype,"delete",null),d([i.TdGET({path:"/health"}),l(0,i.TdResponse()),m("design:type",Function),m("design:paramtypes",[a.Observable]),m("design:returntype",a.Observable)],e.prototype,"health",null),e=d([i.TdHttp({baseUrl:"/api/notification",baseHeaders:new r.HttpHeaders({Accept:"application/json"})})],e)}();function h(e){return e||new g}var S={provide:g,deps:[[new t.Optional,new t.SkipSelf,g]],useFactory:h},O=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[n.CommonModule],providers:[S]}]}],e}(),E={Teradata:"TERADATA",Aster:"ASTER",Presto:"PRESTO"},N=[E.Teradata,E.Aster,E.Presto];var R=function(){function e(){}return e.prototype.health=function(e){return e.pipe(o.catchError((function(e){return a.of(!1)})),o.map((function(e){return!!e})))},e.prototype.query=function(e,t){return t.pipe(o.map((function(e){return{total:+e.headers.get("X-Total"),data:e.body}})))},e.prototype.get=function(e,t){return t},e.prototype.create=function(e,t){return t},e.prototype.update=function(e,t,n){return n},e.prototype.delete=function(e,t){return t},e.prototype.test=function(e,t){return t.pipe(o.map((function(e){return!0})))},d([i.TdGET({path:"/health"}),l(0,i.TdResponse()),m("design:type",Function),m("design:paramtypes",[a.Observable]),m("design:returntype",a.Observable)],e.prototype,"health",null),d([i.TdGET({path:"/systems",options:{observe:"response"}}),l(0,i.TdQueryParams()),l(1,i.TdResponse()),m("design:type",Function),m("design:paramtypes",[r.HttpParams,a.Observable]),m("design:returntype",a.Observable)],e.prototype,"query",null),d([i.TdGET({path:"/systems/:id"}),l(0,i.TdParam("id")),l(1,i.TdResponse()),m("design:type",Function),m("design:paramtypes",[Object,a.Observable]),m("design:returntype",a.Observable)],e.prototype,"get",null),d([i.TdPOST({path:"/systems"}),l(0,i.TdBody()),l(1,i.TdResponse()),m("design:type",Function),m("design:paramtypes",[Object,a.Observable]),m("design:returntype",a.Observable)],e.prototype,"create",null),d([i.TdPUT({path:"/systems/:id"}),l(0,i.TdParam("id")),l(1,i.TdBody()),l(2,i.TdResponse()),m("design:type",Function),m("design:paramtypes",[String,Object,a.Observable]),m("design:returntype",a.Observable)],e.prototype,"update",null),d([i.TdDELETE({path:"/systems/:id"}),l(0,i.TdParam("id")),l(1,i.TdResponse()),m("design:type",Function),m("design:paramtypes",[String,a.Observable]),m("design:returntype",a.Observable)],e.prototype,"delete",null),d([i.TdPOST({path:"/testsystem"}),l(0,i.TdBody()),l(1,i.TdResponse()),m("design:type",Function),m("design:paramtypes",[Object,a.Observable]),m("design:returntype",a.Observable)],e.prototype,"test",null),e=d([i.TdHttp({baseUrl:"/api/system",baseHeaders:new r.HttpHeaders({Accept:"application/json"})})],e)}();function C(e){return e||new R}var q={provide:R,deps:[[new t.Optional,new t.SkipSelf,R]],useFactory:C},A=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[n.CommonModule],providers:[q]}]}],e}();var D=function(){function e(){}return e.prototype.query=function(e){return e},e.prototype.create=function(e,t){return t},e.prototype.update=function(e,t,n){return n},e.prototype.delete=function(e,t){return t},e.prototype.test=function(e,t){return t.pipe(o.map((function(e){return 200===e.status})))},d([i.TdGET({path:"/"}),l(0,i.TdResponse()),m("design:type",Function),m("design:paramtypes",[a.Observable]),m("design:returntype",a.Observable)],e.prototype,"query",null),d([i.TdPOST({path:"/"}),l(0,i.TdBody()),l(1,i.TdResponse()),m("design:type",Function),m("design:paramtypes",[Object,a.Observable]),m("design:returntype",a.Observable)],e.prototype,"create",null),d([i.TdPATCH({path:"/:id"}),l(0,i.TdParam("id")),l(1,i.TdBody()),l(2,i.TdResponse()),m("design:type",Function),m("design:paramtypes",[Object,Object,a.Observable]),m("design:returntype",a.Observable)],e.prototype,"update",null),d([i.TdDELETE({path:"/:id"}),l(0,i.TdParam("id")),l(1,i.TdResponse()),m("design:type",Function),m("design:paramtypes",[Object,a.Observable]),m("design:returntype",a.Observable)],e.prototype,"delete",null),d([i.TdPOST({path:"/verify",options:{observe:"response"}}),l(0,i.TdBody()),l(1,i.TdResponse()),m("design:type",Function),m("design:paramtypes",[Object,a.Observable]),m("design:returntype",a.Observable)],e.prototype,"test",null),e=d([i.TdHttp({baseUrl:"/api/user/ldap/config",baseHeaders:new r.HttpHeaders({Accept:"application/json"})})],e)}();function j(e){return e||new D}var _={provide:D,deps:[[new t.Optional,new t.SkipSelf,D]],useFactory:j};var w=function(){function e(){}return e.prototype.query=function(e,t){return t.pipe(o.catchError((function(e){return a.of(e)})),o.map((function(e){return{total:+e.headers.get("X-Total"),data:e.body}})))},e.prototype.get=function(e,t){return t.pipe(o.catchError((function(e){return a.of(e)})),o.map((function(e){return e.body})))},d([i.TdGET({path:"/users",options:{observe:"response"}}),l(0,i.TdQueryParams()),l(1,i.TdResponse()),m("design:type",Function),m("design:paramtypes",[r.HttpParams,a.Observable]),m("design:returntype",a.Observable)],e.prototype,"query",null),d([i.TdGET({path:"/users/:username",options:{observe:"response"}}),l(0,i.TdParam("username")),l(1,i.TdResponse()),m("design:type",Function),m("design:paramtypes",[String,a.Observable]),m("design:returntype",a.Observable)],e.prototype,"get",null),e=d([i.TdHttp({baseUrl:"/api/user",baseHeaders:new r.HttpHeaders({Accept:"application/json"})})],e)}();function F(e){return e||new w}var H={provide:w,deps:[[new t.Optional,new t.SkipSelf,w]],useFactory:F};var P=function(){function e(){}return e.prototype.query=function(e,t){return t.pipe(o.catchError((function(e){return a.of(e)})),o.map((function(e){return{total:+e.headers.get("X-Total"),data:e.body}})))},d([i.TdGET({path:"/groups",options:{observe:"response"}}),l(0,i.TdQueryParams()),l(1,i.TdResponse()),m("design:type",Function),m("design:paramtypes",[r.HttpParams,a.Observable]),m("design:returntype",a.Observable)],e.prototype,"query",null),e=d([i.TdHttp({baseUrl:"/api/user",baseHeaders:new r.HttpHeaders({Accept:"application/json"})})],e)}();function I(e){return e||new P}var B={provide:P,deps:[[new t.Optional,new t.SkipSelf,P]],useFactory:I},M=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[n.CommonModule],providers:[_,H,B]}]}],e}();var x=function(){function e(e){this._httpClient=e}return e.prototype.querySystem=function(e,t){var n=(new r.HttpHeaders).append("Accept","application/vnd.com.teradata.rest-v1.0+json").append("Content-Type","application/json");return e.creds?(n=n.set("X-Auth-Credentials","Basic "+e.creds),t.logMech=e.system.system_attributes.attributes.log_mech||"DEFAULT"):t.logMech="JWT",t.clientId="VANTAGE.EDITOR",this._httpClient.post("/api/query/tdrest/systems/"+e.system.nickname+"/queries",t,{headers:n}).pipe(o.catchError((function(e){throw e.error})),o.map((function(e){return e})))},e.prototype.getTableInfo=function(e,t,n){var a=(new r.HttpHeaders).append("Accept","application/vnd.com.teradata.rest-v1.0+json").append("Content-Type","application/json");return e.creds&&(a=a.set("X-Auth-Credentials","Basic "+e.creds)),this._httpClient.get("/api/query/systems/"+e.system.nickname+"/databases/"+t+"/tables/"+n,{headers:a}).pipe(o.catchError((function(e){throw e.error})),o.map((function(e){return e})))},e.prototype.getViewInfo=function(e,t,n){var a=(new r.HttpHeaders).append("Accept","application/vnd.com.teradata.rest-v1.0+json").append("Content-Type","application/json");return e.creds&&(a=a.set("X-Auth-Credentials","Basic "+e.creds)),this._httpClient.get("/api/query/systems/"+e.system.nickname+"/databases/"+t+"/views/"+n,{headers:a}).pipe(o.catchError((function(e){throw e.error})),o.map((function(e){return e})))},e.prototype.getQuery=function(e,t){var n=(new r.HttpHeaders).append("Accept","application/vnd.com.teradata.rest-v1.0+json").append("Content-Type","application/json");return e.creds&&(n=n.set("X-Auth-Credentials","Basic "+e.creds)),this._httpClient.get("/api/query/tdrest/systems/"+e.system.nickname+"/queries/"+t,{headers:n}).pipe(o.catchError((function(e){throw e.error})),o.map((function(e){return e})))},e.prototype.getQueries=function(e,t){var n=(new r.HttpHeaders).append("Accept","application/vnd.com.teradata.rest-v1.0+json").append("Content-Type","application/json");return e.creds&&(n=n.set("X-Auth-Credentials","Basic "+e.creds)),this._httpClient.get("/api/query/tdrest/systems/"+e.system.nickname+"/queries?session="+t,{headers:n}).pipe(o.catchError((function(e){throw e.error})),o.map((function(e){return e})))},e.prototype.getQueryResult=function(e,t){var n=(new r.HttpHeaders).append("Accept","application/vnd.com.teradata.rest-v1.0+json").append("Content-Type","application/json");return e.creds&&(n=n.set("X-Auth-Credentials","Basic "+e.creds)),this._httpClient.get("/api/query/tdrest/systems/"+e.system.nickname+"/queries/"+t+"/results",{headers:n}).pipe(o.catchError((function(e){throw e.error})),o.map((function(e){return e})))},e.prototype.deleteQuery=function(e,t){var n=(new r.HttpHeaders).append("Accept","application/vnd.com.teradata.rest-v1.0+json").append("Content-Type","application/json");return e.creds&&(n=n.set("X-Auth-Credentials","Basic "+e.creds)),this._httpClient.delete("/api/query/tdrest/systems/"+e.system.nickname+"/queries/"+t,{headers:n}).pipe(o.catchError((function(e){throw e.error})),o.map((function(e){return e})))},e.prototype.createSession=function(e){var t={autoCommit:"true",transactionMode:"TERA",charSet:"UTF8"},n=(new r.HttpHeaders).append("Accept","application/vnd.com.teradata.rest-v1.0+json").append("Content-Type","application/json");return e.creds?(n=n.set("X-Auth-Credentials","Basic "+e.creds),t.logMech=e.system.system_attributes.attributes.log_mech||"DEFAULT"):t.logMech="JWT",this._httpClient.post("/api/query/tdrest/systems/"+e.system.nickname+"/sessions",t,{headers:n}).pipe(o.catchError((function(e){throw e.error})),o.map((function(e){return e})))},e.prototype.deleteSession=function(e,t){var n=(new r.HttpHeaders).append("Accept","application/vnd.com.teradata.rest-v1.0+json").append("Content-Type","application/json");return e.creds&&(n=n.set("X-Auth-Credentials","Basic "+e.creds)),this._httpClient.delete("/api/query/tdrest/systems/"+e.system.nickname+"/sessions/"+t,{headers:n}).pipe(o.catchError((function(e){throw e.error})),o.map((function(e){return e})))},e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[{type:r.HttpClient}]},e}();function k(e,t){return e||new x(t)}var L={provide:x,deps:[[new t.Optional,new t.SkipSelf,x],r.HttpClient],useFactory:k},V=["DBC","dbcmngr","SQLJ","SystemFe","SysAdmin","SYSBAR","SYSJDBC","SYSLIB","SYSUDTLIB","TDMaps","TD_SERVER_DB","TD_SYSFNLIB","TD_SYSXML","Sys_Calendar"];var G=function(){function e(e){this._queryService=e}return e.prototype.getViewHelp=function(e,t,n){var r=this,a="\n      LOCK ROW FOR ACCESS\n      SELECT CAST(COUNT(*) AS BIGINT) as cnt\n      FROM "+t+"."+n+";\n      SHOW VIEW "+t+"."+n+";\n    ";return this._queryService.getViewInfo(e,t,n).pipe(o.map((function(e){return e.columns.map((function(t){return{comment:t.remarks,type:"column",columnType:t.type,name:t.name,database:e.database,table:e.name}}))})),o.switchMap((function(i){return r._queryService.querySystem(e,{query:a}).pipe(o.map((function(e){var r,a="";e.results[1].data.forEach((function(e){a+=e["Request Text"]})),e.results[0].data.forEach((function(e){r=e.cnt}));var o=i.map((function(e){return{columnName:e.name,type:e.columnType}}));return{database:t,view:n,columns:o,count:r,ddlStatement:a}})))})))},e.prototype.getTableHelp=function(e,t,n){var r=this,a="\n      LOCK ROW FOR ACCESS\n      SELECT CAST(COUNT(*) AS BIGINT) as cnt\n      FROM "+t+"."+n+";\n      SHOW TABLE "+t+"."+n+";\n    ";return this._queryService.getTableInfo(e,t,n).pipe(o.map((function(e){return e.columns.map((function(t){return{comment:t.remarks,type:"column",columnType:t.type,name:t.name,database:e.database,table:e.name}}))})),o.switchMap((function(i){return r._queryService.querySystem(e,{query:a}).pipe(o.map((function(e){var r,a="";e.results[1].data.forEach((function(e){a+=e["Request Text"]})),e.results[0].data.forEach((function(e){r=e.cnt}));var o=i.map((function(e){return{columnName:e.name,type:e.columnType}}));return{database:t,table:n,columns:o,count:r,ddlStatement:a}})))})))},e.prototype.getDatabaseFunction=function(e,t){var n="\n      HELP 'SQL "+t+"';\n    ";return this._queryService.querySystem(e,{query:n}).pipe(o.map((function(e){return e.results[0].data.map((function(e){return e["On-Line Help"]})).join(" ")})))},e.prototype.getDatabaseFunctions=function(e){return this._queryService.querySystem(e,{query:"\n      HELP 'SQL';\n    "}).pipe(o.map((function(e){var t=e.results[0].data.map((function(e){return e["On-Line Help"]})).join(" "),n=t.indexOf("FUNCTIONS")+12;return(t=t.substr(n,t.length)).split(" ").filter((function(e){return e})).map((function(e){return{name:e}}))})))},e.prototype.getAnalyticalFunctions=function(e){return this._queryService.querySystem(e,{query:'\n      HELP FOREIGN SCHEMA "public"@coprocessor;\n    '}).pipe(o.map((function(e){return e.results[0].data.map((function(e){return{name:e.objectname}}))})))},e.prototype.getAnalyticalFunction=function(e,t){var n='\n      HELP FOREIGN FUNCTION "public"."'+t+'"@coprocessor;\n    ';return this._queryService.querySystem(e,{query:n}).pipe(o.map((function(e){for(var t="",n="",r="",a="",o="",i="",s=e.results[0].data.map((function(e){return e["Function Help"]})),p=0;p<s.length;p++){var u=s[p];if(u.indexOf("Function Name:")>-1)for(p++;p<s.indexOf("");p++)t+=s[p]+"\n";else if(u.indexOf("Short Description:")>-1)for(p++;p<s.indexOf("");p++)n+=s[p]+"\n";else if(u.indexOf("Long Description:")>-1)for(p++;p<s.indexOf("");p++)r+=s[p]+"\n";else if(u.indexOf("Usage Syntax:")>-1)for(p++;p<s.indexOf("");p++)a+=s[p]+"\n";else if(u.indexOf("Input Columns:")>-1)for(p++;p<s.indexOf("");p++)o+=s[p]+"\n";else if(u.indexOf("Output Columns:")>-1)for(p++;p<s.indexOf("");p++)i+=s[p]+"\n";else s.indexOf("")>-1&&(p=s.indexOf(""),s[p]=void 0)}return{functionName:t,shortDescription:n,longDescription:r,usageSyntax:a,inputColumns:o,outputColumns:i}})))},e.prototype.resultSetPredicate=function(e){return e.results[0].data.map((function(e){return{name:e.TableName,requestText:e.RequestText,comment:e.CommentString,kind:e.TableKind}}))},e.prototype.getStoredProcedures=function(e){return this._queryService.querySystem(e,{query:"\n      SELECT DataBaseName, TableName, TableKind, RequestText, CommentString FROM dbc.tablesvx\n      WHERE TableKind = 'P'\n      ORDER BY TableName ASC;\n    "}).pipe(o.map(this.resultSetPredicate))},e.prototype.getExternalStoredProcedures=function(e){return this._queryService.querySystem(e,{query:"\n      SELECT DataBaseName, TableName, TableKind, RequestText, CommentString FROM dbc.tablesvx\n      WHERE TableKind = 'E'\n      ORDER BY TableName ASC;\n    "}).pipe(o.map(this.resultSetPredicate))},e.prototype.getMacros=function(e){return this._queryService.querySystem(e,{query:"\n      SELECT DataBaseName, TableName, TableKind, RequestText, CommentString FROM dbc.tablesvx\n      WHERE TableKind = 'M'\n      ORDER BY TableName ASC;\n    "}).pipe(o.map(this.resultSetPredicate))},e.prototype.functionsvxPredicate=function(e){return e.results[0].data.map((function(e){return{database:e.DatabaseName,name:e.SpecificName,paramNumber:e.NumParameters,paramDataTypes:e.ParameterDataTypes,requestText:e.RequestText,commentString:e.CommentString,kind:e.TableKind}}))},e.prototype.getTableOperators=function(e){return this._queryService.querySystem(e,{query:"\n      SELECT func.DatabaseName, func.FunctionName, func.SpecificName, func.NumParameters,\n      func.ParameterDataTypes, tbl.RequestText, tbl.CommentString, tbl.TableKind\n      FROM dbc.functionsvx as func\n      INNER JOIN dbc.tablesvx as tbl\n      ON tbl.TableName = func.SpecificName\n      AND tbl.DataBaseName = func.DatabaseName\n      WHERE FunctionType = 'L'\n      ORDER BY func.FunctionName ASC;\n    "}).pipe(o.map(this.functionsvxPredicate))},e.prototype.getTableFunctions=function(e){return this._queryService.querySystem(e,{query:"\n      SELECT func.DatabaseName, func.FunctionName, func.SpecificName, func.NumParameters,\n      func.ParameterDataTypes, tbl.RequestText, tbl.CommentString, tbl.TableKind\n      FROM dbc.functionsvx as func\n      INNER JOIN dbc.tablesvx as tbl\n      ON tbl.TableName = func.SpecificName\n      AND tbl.DataBaseName = func.DatabaseName\n      WHERE FunctionType = 'R'\n      ORDER BY func.FunctionName ASC;\n    "}).pipe(o.map(this.functionsvxPredicate))},e.prototype.getForeignServers=function(e){return this._queryService.querySystem(e,{query:"\n      SELECT TableName, TableKind FROM DBC.TABLESVX\n      WHERE DATABASENAME = 'TD_SERVER_DB' AND\n      TABLEKIND = 'K' AND\n      TableName <> 'coprocesor';\n    "}).pipe(o.map((function(e){return e.results[0].data.map((function(e){return{name:e.TableName,kind:e.TableKind}}))})))},e.prototype.getForeignSchemas=function(e,t){var n="\n      HELP FOREIGN SERVER "+t+";\n    ";return this._queryService.querySystem(e,{query:n}).pipe(o.map((function(e){return e.results[0].data.map((function(e){return{name:e.Schema,kind:"NONE"}}))})))},e.prototype.getForeignTables=function(e,t,n){var r='\n      HELP FOREIGN DATABASE "'+n+'"@'+t+";\n    ";return this._queryService.querySystem(e,{query:r}).pipe(o.map((function(e){return e.results[0].data.map((function(e){return{name:e.Table,kind:"NONE"}}))})))},e.prototype.getForeignColumns=function(e,t,n,r){var a='\n      HELP FOREIGN TABLE "'+n+'"."'+r+'"@'+t+";\n    ";return this._queryService.querySystem(e,{query:a}).pipe(o.map((function(e){return e.results[0].data.map((function(e){return{name:e.Column,type:e.Type}}))})))},e.prototype.getDatabases=function(e){return this._queryService.querySystem(e,{query:"SELECT databasename, PermSpace, SpoolSpace, TempSpace, CommentString, DBKind FROM dbc.databasesVX ORDER BY databasename;"}).pipe(o.map((function(e){return e.results[0].data.map((function(e){return{name:e.DatabaseName||e.schemaname,type:"U"===e.DBKind?"user":"database",permSpace:e.PermSpace,spoolSpace:e.SpoolSpace,tempSpace:e.TempSpace,comment:e.CommentString}}))})))},e.prototype.getDatabaseObjects=function(e,t){var n="SELECT DataBaseName, TableName, TableKind, CommentString FROM dbc.tablesvx\n       WHERE TableKind in ('T', 'O', 'V') AND DataBaseName = '"+t+"' ORDER BY TableName ASC;";return this._queryService.querySystem(e,{query:n}).pipe(o.map((function(e){return e.results[0].data.map((function(e){var t=e.TableKind||e.tablekind;return{kind:e.TableKind||e.tablekind,type:"V"===t?"view":"table",name:e.TableName||e.tablename,database:e.DataBaseName||e.databasename,comment:e.CommentString}}))})))},e.prototype.getTableColumns=function(e,t,n,r){return"table"===e?this._queryService.getTableInfo(t,n,r).pipe(o.map((function(e){return e.columns.map((function(t){return{comment:t.remarks,type:"column",columnType:t.type,name:t.name,database:e.database,table:e.name}}))}))):"view"===e?this._queryService.getViewInfo(t,n,r).pipe(o.map((function(e){return e.columns.map((function(t){return{comment:t.remarks,type:"column",columnType:t.type,name:t.name,database:e.database,table:e.name}}))}))):void 0},e.prototype.search=function(e,t,n){void 0===n&&(n={databases:!0,objects:!0,columns:!0});var r=[];if(n.databases){var a="\n        SELECT\n            DatabaseName as objectName,\n            'database' as objectType,\n            DBKind as kind,\n            CommentString\n        FROM dbc.databasesvx\n        WHERE DatabaseName LIKE '%"+t+"%'\n        AND DataBaseName NOT IN ('"+V.join("', '")+"')\n      ";r.push(a)}if(n.objects){var i="\n        SELECT\n            DataBaseName || '~|~' || TableName as objectName,\n            'object' as objectType,\n            TableKind as kind,\n            CommentString\n        FROM dbc.tablesvx\n        WHERE TableKind in ('T', 'O', 'V')\n        AND TableName LIKE '%"+t+"%'\n        AND DataBaseName NOT IN ('"+V.join("', '")+"')\n      ";r.push(i)}if(n.objects){var s="\n        SELECT\n            DataBaseName || '~|~' || TableName || '~|~' || ColumnName as objectName,\n            'column' as objectType,\n            ColumnType as kind,\n            CommentString\n        FROM dbc.columnsVX\n        WHERE columnname LIKE '%"+t+"%'\n        AND DataBaseName NOT IN ('"+V.join("', '")+"')\n      ";r.push(s)}var p="\n      WITH quick_search AS (\n          "+r.join("UNION")+"\n      )\n      SELECT * FROM quick_search\n      ORDER BY 1\n      SAMPLE 100;\n    ";return this._queryService.querySystem(e,{query:p}).pipe(o.map((function(e){return e.results[0].data.map((function(e){var t=e.kind;t="column"===e.objectType?"column":"database"===e.objectType?"D"===t?"database":"user":"V"===t?"view":"table";for(var n=[],r=e.objectName.split("~|~"),a=0;a<r.length-1;a++)n.push('"'+r[a]+'"');return{parent:n.join("."),name:r[r.length-1],kind:t,type:e.objectType,comment:e.CommentString}}))})))},e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[{type:x}]},e}();function K(e,t){return e||new G(t)}var U={provide:G,deps:[[new t.Optional,new t.SkipSelf,G],x],useFactory:K},Y=function(){function e(e){this._queryService=e}return Object.defineProperty(e.prototype,"current",{get:function(){return JSON.parse(sessionStorage.getItem("vantage.editor.connection"))},enumerable:!0,configurable:!0}),e.prototype.disconnect=function(){sessionStorage.removeItem("vantage.editor.connection")},e.prototype.connect=function(e){return t=this,n=void 0,a=function(){return y(this,(function(t){switch(t.label){case 0:return this.disconnect(),[4,this._queryService.querySystem(e,{query:"SELECT 1;"}).pipe(o.timeout(7e3),o.retry(1)).toPromise()];case 1:return t.sent(),this.store(e),[2]}}))},new((r=void 0)||(r=Promise))((function(e,o){function i(e){try{p(a.next(e))}catch(e){o(e)}}function s(e){try{p(a.throw(e))}catch(e){o(e)}}function p(t){t.done?e(t.value):new r((function(e){e(t.value)})).then(i,s)}p((a=a.apply(t,n||[])).next())}));var t,n,r,a},e.prototype.store=function(e){var t=e.system,n=e.creds;sessionStorage.setItem("vantage.editor.connection",JSON.stringify({system:t,creds:n}))},e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[{type:x}]},e}();function W(e,t){return e||new Y(t)}var X={provide:Y,deps:[[new t.Optional,new t.SkipSelf,Y],x],useFactory:W},Q=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[n.CommonModule],providers:[X,U,L]}]}],e}(),J=function(){};var z=function(){function e(e,t){this._dialogService=e,this._translate=t}return e.prototype.open=function(e){if(e){var t={title:this._translate.instant("THERE_WAS_A_PROBLEM"),message:e.message,disableClose:!0,closeButton:this._translate.instant("CLOSE")};if(e.error&&(t.message+=" ("+e.error.toString()+")"),t.message||t.title)return this._dialogService.openAlert(t)}},e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[{type:s.TdDialogService},{type:p.TranslateService}]},e}();function $(e,t,n){return e||new z(t,n)}var Z={provide:z,deps:[[new t.Optional,new t.SkipSelf,z],s.TdDialogService,p.TranslateService],useFactory:$},ee=function(){function e(e,t){this._snackBarService=e,this._media=t}return e.prototype.open=function(e,t){void 0===t&&(t=3e3),e&&this._snackBarService.open(e,void 0,{duration:t,horizontalPosition:this._media&&this._media.query("gt-sm")?"end":"center"})},e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[{type:u.MatSnackBar},{type:c.TdMediaService}]},e}();function te(e,t,n){return e||new ee(t,n)}var ne={provide:ee,deps:[[new t.Optional,new t.SkipSelf,ee],u.MatSnackBar,[new t.Optional,c.TdMediaService]],useFactory:te},re=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[n.CommonModule,u.MatSnackBarModule,s.CovalentDialogsModule,c.CovalentMediaModule],providers:[Z,ne]}]}],e}(),ae="vantage.theme",oe={DARK:"dark-theme",LIGHT:"light-theme"},ie=function(){function e(e,t){var n=this;this._document=e,this.rendererFactory=t,this._activeThemeSubject=new a.BehaviorSubject(localStorage.getItem(ae)),this.activeTheme$=this._activeThemeSubject.asObservable(),this._renderer2=t.createRenderer(void 0,void 0),a.fromEvent(window,"storage").pipe(o.filter((function(e){return e.key===ae}))).subscribe((function(e){return n.applyTheme(e.newValue)}))}return Object.defineProperty(e.prototype,"activeTheme",{get:function(){return this._activeThemeSubject.getValue()},set:function(e){this._activeThemeSubject.next(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"darkThemeIsActive",{get:function(){return this.activeTheme===oe.DARK},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lightThemeIsActive",{get:function(){return this.activeTheme===oe.LIGHT},enumerable:!0,configurable:!0}),e.prototype.applyLightTheme=function(){this.applyTheme(oe.LIGHT)},e.prototype.applyDarkTheme=function(){this.applyTheme(oe.DARK)},e.prototype.applyTheme=function(e){this._renderer2.removeClass(this._document.querySelector("html"),e===oe.DARK?oe.LIGHT:oe.DARK),localStorage.setItem(ae,e),this._renderer2.addClass(this._document.querySelector("html"),e),this.activeTheme=localStorage.getItem(ae)},e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:void 0,decorators:[{type:t.Inject,args:[n.DOCUMENT]}]},{type:t.RendererFactory2}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(n.DOCUMENT),t.ɵɵinject(t.RendererFactory2))},token:e,providedIn:"root"}),e}();e.LDAPEncription={None:"NONE"},e.SystemType=E,e.VANTAGE_CONNECTION_PROVIDER=X,e.VANTAGE_CONNECTION_PROVIDER_FACTORY=W,e.VANTAGE_DICTIONARY_PROVIDER=U,e.VANTAGE_DICTIONARY_PROVIDER_FACTORY=K,e.VANTAGE_QUERY_PROVIDER=L,e.VANTAGE_QUERY_PROVIDER_FACTORY=k,e.VANTAGE_SYSTEMS_TYPES=N,e.VantageAuditModule=v,e.VantageAuditService=f,e.VantageConnectionService=Y,e.VantageDictionaryService=G,e.VantageError=J,e.VantageErrorService=z,e.VantageGroupService=P,e.VantageLDAPService=D,e.VantageNotificationModule=O,e.VantageQueryService=x,e.VantageSMTPService=g,e.VantageSQLEModule=Q,e.VantageSystemModule=A,e.VantageSystemService=R,e.VantageTheme=oe,e.VantageThemeService=ie,e.VantageToastService=ee,e.VantageUserFeedbackModule=re,e.VantageUserModule=M,e.VantageUserService=w,e.sysDatabases=V,e.ɵa=b,e.ɵb=T,e.ɵc=h,e.ɵd=S,e.ɵe=C,e.ɵf=q,e.ɵg=j,e.ɵh=_,e.ɵi=I,e.ɵj=B,e.ɵk=F,e.ɵl=H,e.ɵm=$,e.ɵn=Z,e.ɵo=te,e.ɵp=ne,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=td-vantage-ui-platform.umd.min.js.map