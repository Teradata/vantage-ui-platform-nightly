{"version":3,"file":"td-vantage-ui-platform-user.js","sources":["ng://@td-vantage/ui-platform/user/ldap/ldap.service.ts","ng://@td-vantage/ui-platform/user/user/user.service.ts","ng://@td-vantage/ui-platform/user/group/group.service.ts","ng://@td-vantage/ui-platform/user/user.module.ts"],"sourcesContent":["import { Provider, Optional, SkipSelf } from '@angular/core';\nimport { HttpHeaders } from '@angular/common/http';\n\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\nimport { TdHttp, TdGET, TdPUT, TdPOST, TdPATCH, TdDELETE, TdParam, TdBody, TdResponse } from '@covalent/http';\n\nexport enum LDAPEncription {\n  None = 'NONE',\n}\n\nexport interface ILDAPConfig {\n  allowed_groups?: string[];\n  base_dn?: string;\n  config_id?: number;\n  connectionUrl?: string;\n  email_field?: string;\n  encryption?: LDAPEncription;\n  group_id_field?: string;\n  groups_base_dn?: string;\n  id_field?: string;\n  member_field?: string;\n  member_of_field?: string;\n  name_field?: string;\n  port?: number;\n  search_pass?: string;\n  search_user?: string;\n  server?: string;\n  url?: string;\n}\n\n@TdHttp({\n  baseUrl: '/api/user/ldap/config',\n  baseHeaders: new HttpHeaders({ Accept: 'application/json' }),\n})\nexport class VantageLDAPService {\n  @TdGET({\n    path: '/',\n  })\n  query(@TdResponse() response?: Observable<ILDAPConfig[]>): Observable<ILDAPConfig[]> {\n    return response;\n  }\n\n  @TdPOST({\n    path: '/',\n  })\n  create(@TdBody() body: ILDAPConfig, @TdResponse() response?: Observable<ILDAPConfig>): Observable<ILDAPConfig> {\n    return response;\n  }\n\n  @TdPATCH({\n    path: '/:id',\n  })\n  update(\n    @TdParam('id') id: string | number,\n    @TdBody() body: ILDAPConfig,\n    @TdResponse() response?: Observable<ILDAPConfig>,\n  ): Observable<ILDAPConfig> {\n    return response;\n  }\n\n  @TdDELETE({\n    path: '/:id',\n  })\n  delete(@TdParam('id') id: string | number, @TdResponse() response?: Observable<void>): Observable<void> {\n    return response;\n  }\n\n  @TdPOST({\n    path: '/verify',\n    options: {\n      observe: 'response',\n    },\n  })\n  test(@TdBody() body: ILDAPConfig, @TdResponse() response?: Observable<boolean>): Observable<boolean> {\n    return response.pipe(\n      map((res: any) => {\n        return res.status === 200;\n      }),\n    );\n  }\n}\n\nexport function VANTAGE_LDAP_PROVIDER_FACTORY(parent: VantageLDAPService): VantageLDAPService {\n  return parent || new VantageLDAPService();\n}\n\nexport const VANTAGE_LDAP_PROVIDER: Provider = {\n  // If there is already a service available, use that. Otherwise, provide a new one.\n  provide: VantageLDAPService,\n  deps: [[new Optional(), new SkipSelf(), VantageLDAPService]],\n  useFactory: VANTAGE_LDAP_PROVIDER_FACTORY,\n};\n","import { Provider, SkipSelf, Optional } from '@angular/core';\nimport { HttpHeaders, HttpResponse, HttpParams } from '@angular/common/http';\nimport { TdHttp, TdGET, TdResponse, TdParam, TdQueryParams } from '@covalent/http';\nimport { Observable, of } from 'rxjs';\nimport { map, catchError } from 'rxjs/operators';\n\nexport interface IUser {\n  username?: string;\n  password?: string;\n  email?: string;\n  local?: boolean;\n  admin?: boolean;\n  groups?: string[];\n  display_name?: string;\n  access_token?: string;\n  expires_at?: number;\n}\n\n@TdHttp({\n  baseUrl: '/api/user',\n  baseHeaders: new HttpHeaders({\n    Accept: 'application/json',\n  }),\n})\nexport class VantageUserService {\n  /**\n   * get all users\n   */\n  @TdGET({\n    path: '/users',\n    options: {\n      observe: 'response',\n    },\n  })\n  query(\n    @TdQueryParams() queryParams?: HttpParams,\n    @TdResponse() response?: Observable<HttpResponse<any>>,\n  ): Observable<{ total: number; data: IUser[] }> {\n    return response.pipe(\n      catchError((error: Response) => {\n        return of(error);\n      }),\n      map((res: HttpResponse<any>) => {\n        return {\n          total: +res.headers.get('X-Total'),\n          data: <IUser[]>res.body,\n        };\n      }),\n    );\n  }\n\n  /**\n   * gets a single users information\n   */\n  @TdGET({\n    path: '/users/:username',\n    options: {\n      observe: 'response',\n    },\n  })\n  get(@TdParam('username') id: string, @TdResponse() response?: Observable<HttpResponse<any>>): Observable<IUser> {\n    return response.pipe(\n      catchError((error: Response) => {\n        return of(error);\n      }),\n      map((res: HttpResponse<IUser>) => {\n        return res.body;\n      }),\n    );\n  }\n}\n\nexport function VANTAGE_USER_PROVIDER_FACTORY(parent: VantageUserService): VantageUserService {\n  return parent || new VantageUserService();\n}\n\nexport const VANTAGE_USER_PROVIDER: Provider = {\n  // If there is already a service available, use that. Otherwise, provide a new one.\n  provide: VantageUserService,\n  deps: [[new Optional(), new SkipSelf(), VantageUserService]],\n  useFactory: VANTAGE_USER_PROVIDER_FACTORY,\n};\n","import { Provider, SkipSelf, Optional } from '@angular/core';\nimport { HttpHeaders, HttpResponse, HttpParams } from '@angular/common/http';\nimport { TdHttp, TdGET, TdResponse, TdQueryParams } from '@covalent/http';\nimport { Observable, of } from 'rxjs';\nimport { map, catchError } from 'rxjs/operators';\n\nexport interface IGroup {\n  name?: string;\n  description?: string;\n  id?: string;\n  display_name?: string;\n  users?: string[];\n}\n\n@TdHttp({\n  baseUrl: '/api/user',\n  baseHeaders: new HttpHeaders({\n    Accept: 'application/json',\n  }),\n})\nexport class VantageGroupService {\n  /**\n   * get groups in paginated form via query string\n   */\n  @TdGET({\n    path: '/groups',\n    options: {\n      observe: 'response',\n    },\n  })\n  query(\n    @TdQueryParams() queryParams?: HttpParams,\n    @TdResponse() response?: Observable<HttpResponse<any>>,\n  ): Observable<{ total: number; data: IGroup[] }> {\n    return response.pipe(\n      catchError((error: Response) => {\n        return of(error);\n      }),\n      map((res: HttpResponse<any>) => {\n        return {\n          total: +res.headers.get('X-Total'),\n          data: <IGroup[]>res.body,\n        };\n      }),\n    );\n  }\n}\n\nexport function VANTAGE_GROUP_PROVIDER_FACTORY(parent: VantageGroupService): VantageGroupService {\n  return parent || new VantageGroupService();\n}\n\nexport const VANTAGE_GROUP_PROVIDER: Provider = {\n  // If there is already a service available, use that. Otherwise, provide a new one.\n  provide: VantageGroupService,\n  deps: [[new Optional(), new SkipSelf(), VantageGroupService]],\n  useFactory: VANTAGE_GROUP_PROVIDER_FACTORY,\n};\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { VANTAGE_LDAP_PROVIDER } from './ldap/ldap.service';\nimport { VANTAGE_USER_PROVIDER } from './user/user.service';\nimport { VANTAGE_GROUP_PROVIDER } from './group/group.service';\n\n@NgModule({\n  imports: [CommonModule],\n  providers: [VANTAGE_LDAP_PROVIDER, VANTAGE_USER_PROVIDER, VANTAGE_GROUP_PROVIDER],\n})\nexport class VantageUserModule {}\n"],"names":[],"mappings":"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"}