{"version":3,"file":"td-vantage-ui-platform-audit.js","sources":["ng://@td-vantage/ui-platform/audit/audit.service.ts","ng://@td-vantage/ui-platform/audit/audit.module.ts"],"sourcesContent":["import { Optional, SkipSelf, Provider } from '@angular/core';\nimport { HttpParams, HttpHeaders, HttpResponse, HttpErrorResponse } from '@angular/common/http';\n\nimport { Observable, of } from 'rxjs';\nimport { map, catchError } from 'rxjs/operators';\n\nimport { TdHttp, TdGET, TdPOST, TdParam, TdBody, TdResponse, TdQueryParams } from '@covalent/http';\n\nexport interface IAuditLog {\n  action?: string;\n  component?: string;\n  correlation_id?: string;\n  details?: string;\n  id?: number;\n  logtime?: any;\n  message?: string;\n  result?: boolean;\n  username?: string;\n}\n\n@TdHttp({\n  baseUrl: '/api/audit',\n  baseHeaders: new HttpHeaders({ Accept: 'application/json' }),\n})\nexport class VantageAuditService {\n  @TdGET({\n    path: '/audit/messages',\n    options: {\n      observe: 'response',\n    },\n  })\n  query(\n    @TdQueryParams() params?: HttpParams,\n    @TdResponse() response?: Observable<HttpResponse<any>>,\n  ): Observable<{ total: number; data: IAuditLog[] }> {\n    return response.pipe(\n      map((res: HttpResponse<any>) => {\n        return {\n          total: +res.headers.get('X-Total'),\n          data: <IAuditLog[]>res.body,\n        };\n      }),\n    );\n  }\n\n  @TdPOST({\n    path: '/audit/messages',\n  })\n  create(@TdBody() body: IAuditLog, @TdResponse() response?: Observable<IAuditLog>): Observable<IAuditLog> {\n    return response;\n  }\n\n  @TdGET({\n    path: '/audit/messages/:id',\n  })\n  get(@TdParam('id') id: number | string, @TdResponse() response?: Observable<IAuditLog>): Observable<IAuditLog> {\n    return response;\n  }\n\n  @TdGET({\n    path: '/health',\n  })\n  health(@TdResponse() response?: Observable<HttpResponse<any>>): Observable<boolean> {\n    return response.pipe(\n      catchError((error: HttpErrorResponse) => {\n        return of(false);\n      }),\n      map((res: HttpResponse<any>) => {\n        return !!res;\n      }),\n    );\n  }\n}\n\nexport function VANTAGE_AUDIT_PROVIDER_FACTORY(parent: VantageAuditService): VantageAuditService {\n  return parent || new VantageAuditService();\n}\n\nexport const VANTAGE_AUDIT_PROVIDER: Provider = {\n  // If there is already a service available, use that. Otherwise, provide a new one.\n  provide: VantageAuditService,\n  deps: [[new Optional(), new SkipSelf(), VantageAuditService]],\n  useFactory: VANTAGE_AUDIT_PROVIDER_FACTORY,\n};\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { VANTAGE_AUDIT_PROVIDER } from './audit.service';\n\n@NgModule({\n  imports: [CommonModule],\n  providers: [VANTAGE_AUDIT_PROVIDER],\n})\nexport class VantageAuditModule {}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAQA,wBAUC;;;IATC,2BAAgB;;IAChB,8BAAmB;;IACnB,mCAAwB;;IACxB,4BAAiB;;IACjB,uBAAY;;IACZ,4BAAc;;IACd,4BAAiB;;IACjB,2BAAiB;;IACjB,6BAAkB;;;;KAuDnB;;;;;;IAzCC,mCAAK;;;;;IAAL,UACmB,MAAmB,EACtB,QAAwC;QAEtD,OAAO,QAAQ,CAAC,IAAI,CAClB,GAAG;;;;QAAC,UAAC,GAAsB;YACzB,OAAO;gBACL,KAAK,EAAE,CAAC,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,SAAS,CAAC;gBAClC,IAAI,qBAAe,GAAG,CAAC,IAAI,EAAA;aAC5B,CAAC;SACH,EAAC,CACH,CAAC;KACH;;;;;;IAKD,oCAAM;;;;;IAAN,UAAiB,IAAe,EAAgB,QAAgC;QAC9E,OAAO,QAAQ,CAAC;KACjB;;;;;;IAKD,iCAAG;;;;;IAAH,UAAmB,EAAmB,EAAgB,QAAgC;QACpF,OAAO,QAAQ,CAAC;KACjB;;;;;IAKD,oCAAM;;;;IAAN,UAAqB,QAAwC;QAC3D,OAAO,QAAQ,CAAC,IAAI,CAClB,UAAU;;;;QAAC,UAAC,KAAwB;YAClC,OAAO,EAAE,CAAC,KAAK,CAAC,CAAC;SAClB,EAAC,EACF,GAAG;;;;QAAC,UAAC,GAAsB;YACzB,OAAO,CAAC,CAAC,GAAG,CAAC;SACd,EAAC,CACH,CAAC;KACH;IAxCD;QANC,KAAK,CAAC;YACL,IAAI,EAAE,iBAAiB;YACvB,OAAO,EAAE;gBACP,OAAO,EAAE,UAAU;aACpB;SACF,CAAC;QAEC,WAAA,aAAa,EAAE,CAAA;QACf,WAAA,UAAU,EAAE,CAAA;;yCADa,UAAU;YACX,UAAU;wCAClC,UAAU;oDASZ;IAKD;QAHC,MAAM,CAAC;YACN,IAAI,EAAE,iBAAiB;SACxB,CAAC;QACM,WAAA,MAAM,EAAE,CAAA,EAAmB,WAAA,UAAU,EAAE,CAAA;;iDAAY,UAAU;wCAAc,UAAU;qDAE5F;IAKD;QAHC,KAAK,CAAC;YACL,IAAI,EAAE,qBAAqB;SAC5B,CAAC;QACG,WAAA,OAAO,CAAC,IAAI,CAAC,CAAA,EAAuB,WAAA,UAAU,EAAE,CAAA;;iDAAY,UAAU;wCAAc,UAAU;kDAElG;IAKD;QAHC,KAAK,CAAC;YACL,IAAI,EAAE,SAAS;SAChB,CAAC;QACM,WAAA,UAAU,EAAE,CAAA;;yCAAY,UAAU;wCAAsB,UAAU;qDASzE;IA/CU,mBAAmB;QAJ/B,MAAM,CAAC;YACN,OAAO,EAAE,YAAY;YACrB,WAAW,EAAE,IAAI,WAAW,CAAC,EAAE,MAAM,EAAE,kBAAkB,EAAE,CAAC;SAC7D,CAAC;OACW,mBAAmB,CAgD/B;IAAD,0BAAC;CAAA,IAAA;;;;;AAED,SAAgB,8BAA8B,CAAC,MAA2B;IACxE,OAAO,MAAM,IAAI,IAAI,mBAAmB,EAAE,CAAC;CAC5C;;AAED,IAAa,sBAAsB,GAAa;;IAE9C,OAAO,EAAE,mBAAmB;IAC5B,IAAI,EAAE,CAAC,CAAC,IAAI,QAAQ,EAAE,EAAE,IAAI,QAAQ,EAAE,EAAE,mBAAmB,CAAC,CAAC;IAC7D,UAAU,EAAE,8BAA8B;CAC3C;;;;;;ACnFD;IAKA;KAIkC;;gBAJjC,QAAQ,SAAC;oBACR,OAAO,EAAE,CAAC,YAAY,CAAC;oBACvB,SAAS,EAAE,CAAC,sBAAsB,CAAC;iBACpC;;IACgC,yBAAC;CAJlC;;;;;;;;;;;;;;;;;;;"}