{"version":3,"file":"td-vantage-ui-platform-app.js","sources":["ng://@td-vantage/ui-platform/app/app.service.ts","ng://@td-vantage/ui-platform/app/tags.service.ts","ng://@td-vantage/ui-platform/app/app.module.ts"],"sourcesContent":["import { Optional, SkipSelf, Provider, Injectable } from '@angular/core';\nimport { HttpHeaders, HttpParams, HttpResponse } from '@angular/common/http';\n\nimport { TdHttp, TdParam, TdBody, TdQueryParams, TdResponse, TdGET, TdPOST, TdDELETE, TdPATCH } from '@covalent/http';\n\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\nexport enum AppType {\n  SQL = 'sql',\n  BTEQ = 'bteq',\n  CUSTOM = 'custom',\n}\n\nexport interface IApp {\n  app_id?: string;\n  app_type?: AppType;\n  app_code?: string;\n  app_state?: string;\n  collaborators?: IAppPermissions;\n  color?: string;\n  config?: any;\n  cpus?: number;\n  description?: string;\n  dockerImageName?: string;\n  icon?: string;\n  install_time?: string;\n  installed_by?: string;\n  last_updated_by?: string;\n  last_updated_time?: string;\n  memory?: number;\n  name?: string;\n  owners?: IAppPermissions;\n  public?: boolean;\n  results_config?: any;\n  versions?: any;\n  last_version_status?: string;\n  database?: string;\n  system_name?: string;\n  username?: string;\n  password?: string;\n  param_name?: string;\n  ephemeral?: boolean;\n  can_execute?: boolean;\n  web_root?: string;\n  access_url?: string;\n  tag_names?: any[];\n  exposedPorts?: any[];\n  system_id?: string;\n  containerPort?: number;\n  favorite?: boolean;\n}\n\nexport interface IAppConfiguration {\n  id: string;\n  name?: string;\n  type?: 'text' | 'number' | 'boolean' | 'date';\n  min?: number | Date;\n  max?: number | Date;\n  required?: boolean;\n  default?: any;\n}\n\nexport interface IAppPermissions {\n  users?: string[];\n  groups?: string[];\n}\n\n@TdHttp({\n  baseUrl: '/api/app',\n  baseHeaders: new HttpHeaders({ Accept: 'application/json' }),\n})\n@Injectable()\nexport class VantageAppService {\n  @TdGET({\n    path: '/apps',\n    options: {\n      observe: 'response',\n    },\n  })\n  query(\n    @TdQueryParams() params?: HttpParams,\n    @TdResponse() response?: Observable<HttpResponse<any>>,\n  ): Observable<{ total: number; data: IApp[] }> {\n    return response.pipe(\n      map((res: HttpResponse<any>) => {\n        return {\n          total: +res.headers.get('X-Total'),\n          data: <IApp[]>res.body,\n        };\n      }),\n    );\n  }\n\n  @TdGET({\n    path: '/apps/:id',\n  })\n  get(@TdParam('id') id: string, @TdResponse() response?: Observable<IApp>): Observable<IApp> {\n    return response;\n  }\n\n  @TdPOST({\n    path: '/apps',\n  })\n  create(@TdBody() body: IApp, @TdResponse() response?: Observable<IApp>): Observable<IApp> {\n    return response;\n  }\n\n  @TdPATCH({\n    path: '/apps/:id',\n  })\n  update(@TdParam('id') id: string, @TdBody() body: IApp, @TdResponse() response?: Observable<IApp>): Observable<IApp> {\n    return response;\n  }\n\n  @TdDELETE({\n    path: '/apps/:id',\n  })\n  delete(@TdParam('id') id: string, @TdResponse() response?: Observable<IApp>): Observable<IApp> {\n    return response;\n  }\n\n  @TdPOST({\n    path: '/apps/:id/container',\n  })\n  public uploadFile(\n    @TdParam('id') id: string,\n    @TdBody() formData: FormData,\n    @TdResponse() response?: Observable<HttpResponse<any>>,\n  ): Observable<boolean> {\n    return response.pipe(\n      map((res: HttpResponse<any>) => {\n        return true;\n      }),\n    );\n  }\n}\n\nexport function VANTAGE_APP_PROVIDER_FACTORY(parent: VantageAppService): VantageAppService {\n  return parent || new VantageAppService();\n}\n\nexport const VANTAGE_APP_PROVIDER: Provider = {\n  // If there is already a service available, use that. Otherwise, provide a new one.\n  provide: VantageAppService,\n  deps: [[new Optional(), new SkipSelf(), VantageAppService]],\n  useFactory: VANTAGE_APP_PROVIDER_FACTORY,\n};\n","import { Optional, SkipSelf, Provider, Injectable } from '@angular/core';\nimport { HttpHeaders, HttpParams, HttpResponse } from '@angular/common/http';\n\nimport { TdHttp, TdQueryParams, TdResponse, TdGET } from '@covalent/http';\n\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\nexport interface ITag {\n  tag_id?: string;\n  tag?: string;\n}\n\n@TdHttp({\n  baseUrl: '/api/app',\n  baseHeaders: new HttpHeaders({ Accept: 'application/json' }),\n})\n@Injectable()\nexport class VantageTagsService {\n  @TdGET({\n    path: '/tags',\n    options: {\n      observe: 'response',\n    },\n  })\n  query(\n    @TdQueryParams() params?: HttpParams,\n    @TdResponse() response?: Observable<HttpResponse<any>>,\n  ): Observable<{ total: number; data: ITag[] }> {\n    return response.pipe(\n      map((res: HttpResponse<any>) => {\n        return {\n          total: +res.headers.get('X-Total'),\n          data: <ITag[]>res.body,\n        };\n      }),\n    );\n  }\n}\n\nexport function VANTAGE_TAGS_PROVIDER_FACTORY(parent: VantageTagsService): VantageTagsService {\n  return parent || new VantageTagsService();\n}\n\nexport const VANTAGE_TAGS_PROVIDER: Provider = {\n  // If there is already a service available, use that. Otherwise, provide a new one.\n  provide: VantageTagsService,\n  deps: [[new Optional(), new SkipSelf(), VantageTagsService]],\n  useFactory: VANTAGE_TAGS_PROVIDER_FACTORY,\n};\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { VANTAGE_APP_PROVIDER } from './app.service';\nimport { VANTAGE_TAGS_PROVIDER } from './tags.service';\n\n@NgModule({\n  imports: [CommonModule],\n  providers: [VANTAGE_APP_PROVIDER, VANTAGE_TAGS_PROVIDER],\n})\nexport class VantageAppModule {}\n"],"names":[],"mappings":"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"}