{"version":3,"file":"td-vantage-ui-platform-app.js","sources":["ng://@td-vantage/ui-platform/app/app.service.ts","ng://@td-vantage/ui-platform/app/tags.service.ts","ng://@td-vantage/ui-platform/app/app.module.ts"],"sourcesContent":["import { Optional, SkipSelf, Provider, Injectable } from '@angular/core';\nimport { HttpHeaders, HttpParams, HttpResponse } from '@angular/common/http';\n\nimport { TdHttp, TdParam, TdBody, TdQueryParams, TdResponse, TdGET, TdPOST, TdDELETE, TdPATCH } from '@covalent/http';\n\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\nexport enum AppType {\n  SQL = 'sql',\n  BTEQ = 'bteq',\n  CUSTOM = 'custom',\n}\n\nexport interface IApp {\n  app_id?: string;\n  app_type?: AppType;\n  app_code?: string;\n  app_state?: string;\n  collaborators?: IAppPermissions;\n  color?: string;\n  config?: any;\n  cpus?: number;\n  description?: string;\n  dockerImageName?: string;\n  icon?: string;\n  install_time?: string;\n  installed_by?: string;\n  last_updated_by?: string;\n  last_updated_time?: string;\n  memory?: number;\n  name?: string;\n  owners?: IAppPermissions;\n  public?: boolean;\n  results_config?: any;\n  versions?: any;\n  last_version_status?: string;\n  database?: string;\n  system_name?: string;\n  username?: string;\n  password?: string;\n  param_name?: string;\n  ephemeral?: boolean;\n  can_execute?: boolean;\n  web_root?: string;\n  access_url?: string;\n  tag_names?: any[];\n  exposedPorts?: any[];\n  system_id?: string;\n  containerPort?: number;\n  favorite?: boolean;\n}\n\nexport interface IAppConfiguration {\n  id: string;\n  name?: string;\n  type?: 'text' | 'number' | 'boolean' | 'date';\n  min?: number | Date;\n  max?: number | Date;\n  required?: boolean;\n  default?: any;\n}\n\nexport interface IAppPermissions {\n  users?: string[];\n  groups?: string[];\n}\n\n@TdHttp({\n  baseUrl: '/api/app',\n  baseHeaders: new HttpHeaders({ Accept: 'application/json' }),\n})\n@Injectable()\nexport class VantageAppService {\n  @TdGET({\n    path: '/apps',\n    options: {\n      observe: 'response',\n    },\n  })\n  query(\n    @TdQueryParams() params?: HttpParams,\n    @TdResponse() response?: Observable<HttpResponse<any>>,\n  ): Observable<{ total: number; data: IApp[] }> {\n    return response.pipe(\n      map((res: HttpResponse<any>) => {\n        return {\n          total: +res.headers.get('X-Total'),\n          data: <IApp[]>res.body,\n        };\n      }),\n    );\n  }\n\n  @TdGET({\n    path: '/apps/:id',\n  })\n  get(@TdParam('id') id: string, @TdResponse() response?: Observable<IApp>): Observable<IApp> {\n    return response;\n  }\n\n  @TdPOST({\n    path: '/apps',\n  })\n  create(@TdBody() body: IApp, @TdResponse() response?: Observable<IApp>): Observable<IApp> {\n    return response;\n  }\n\n  @TdPATCH({\n    path: '/apps/:id',\n  })\n  update(@TdParam('id') id: string, @TdBody() body: IApp, @TdResponse() response?: Observable<IApp>): Observable<IApp> {\n    return response;\n  }\n\n  @TdDELETE({\n    path: '/apps/:id',\n  })\n  delete(@TdParam('id') id: string, @TdResponse() response?: Observable<IApp>): Observable<IApp> {\n    return response;\n  }\n\n  @TdPOST({\n    path: '/apps/:id/container',\n  })\n  public uploadFile(\n    @TdParam('id') id: string,\n    @TdBody() formData: FormData,\n    @TdResponse() response?: Observable<HttpResponse<any>>,\n  ): Observable<boolean> {\n    return response.pipe(\n      map((res: HttpResponse<any>) => {\n        return true;\n      }),\n    );\n  }\n}\n\nexport function VANTAGE_APP_PROVIDER_FACTORY(parent: VantageAppService): VantageAppService {\n  return parent || new VantageAppService();\n}\n\nexport const VANTAGE_APP_PROVIDER: Provider = {\n  // If there is already a service available, use that. Otherwise, provide a new one.\n  provide: VantageAppService,\n  deps: [[new Optional(), new SkipSelf(), VantageAppService]],\n  useFactory: VANTAGE_APP_PROVIDER_FACTORY,\n};\n","import { Optional, SkipSelf, Provider, Injectable } from '@angular/core';\nimport { HttpHeaders, HttpParams, HttpResponse } from '@angular/common/http';\n\nimport { TdHttp, TdQueryParams, TdResponse, TdGET } from '@covalent/http';\n\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\nexport interface ITag {\n  tag_id?: string;\n  tag?: string;\n}\n\n@TdHttp({\n  baseUrl: '/api/app',\n  baseHeaders: new HttpHeaders({ Accept: 'application/json' }),\n})\n@Injectable()\nexport class VantageTagsService {\n  @TdGET({\n    path: '/tags',\n    options: {\n      observe: 'response',\n    },\n  })\n  query(\n    @TdQueryParams() params?: HttpParams,\n    @TdResponse() response?: Observable<HttpResponse<any>>,\n  ): Observable<{ total: number; data: ITag[] }> {\n    return response.pipe(\n      map((res: HttpResponse<any>) => {\n        return {\n          total: +res.headers.get('X-Total'),\n          data: <ITag[]>res.body,\n        };\n      }),\n    );\n  }\n}\n\nexport function VANTAGE_TAGS_PROVIDER_FACTORY(parent: VantageTagsService): VantageTagsService {\n  return parent || new VantageTagsService();\n}\n\nexport const VANTAGE_TAGS_PROVIDER: Provider = {\n  // If there is already a service available, use that. Otherwise, provide a new one.\n  provide: VantageTagsService,\n  deps: [[new Optional(), new SkipSelf(), VantageTagsService]],\n  useFactory: VANTAGE_TAGS_PROVIDER_FACTORY,\n};\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { VANTAGE_APP_PROVIDER } from './app.service';\nimport { VANTAGE_TAGS_PROVIDER } from './tags.service';\n\n@NgModule({\n  imports: [CommonModule],\n  providers: [VANTAGE_APP_PROVIDER, VANTAGE_TAGS_PROVIDER],\n})\nexport class VantageAppModule {}\n"],"names":[],"mappings":"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"}